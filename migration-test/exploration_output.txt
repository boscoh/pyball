Traceback (most recent call last):
  File "/Users/boscoh/p/pyball/migration-test/explore_pdbstruct.py", line 99, in <module>
    for i, residue in enumerate(residues[:5]):
                                ^^^^^^^^
NameError: name 'residues' is not defined
Traceback (most recent call last):
  File "/Users/boscoh/p/pyball/migration-test/explore_pdbstruct.py", line 176, in <module>
    print(f"  v1 * 2 = {v1 * 2}")
                        ~~~^~~
TypeError: unsupported operand type(s) for *: 'Vector3d' and 'int'
======================================================================
PDBSTRUCT API EXPLORATION
======================================================================
✓ pdbstruct imported successfully

Using test file: /Users/boscoh/p/pyball/1be9.pdb

======================================================================
TEST 1: LOADING PDB FILES
======================================================================

Old (pdbremix):
  from pdbremix import pdbatoms
  soup = pdbatoms.Soup(filename)

New (pdbstruct):
  from pdbstruct import parse
  s = parse.load_soup(filename)

✓ Loaded PDB file successfully
  Type: <class 'pdbstruct.soup.Soup'>

======================================================================
TEST 2: ACCESSING RESIDUES
======================================================================
✗ Error accessing residues: 'Soup' object has no attribute 'residues'

======================================================================
TEST 3: ACCESSING ATOMS
======================================================================

Old (pdbremix):
  ca = residue.atom('CA')
  pos = ca.pos
  objid = ca.objid

New (pdbstruct):
  ca = residue['CA']  # Or residue.get('CA')?
  pos = ca.position  # Or ca.pos?
✗ Error accessing atoms: name 'residues' is not defined

======================================================================
TEST 4: VECTOR OPERATIONS
======================================================================

Old (pdbremix v3):
  import pdbremix.v3 as v3
  vec = v3.vector(1.0, 2.0, 3.0)
  normalized = v3.norm(vec)
  dist = v3.distance(v1, v2)
  d = v3.dot(v1, v2)
  c = v3.cross(v1, v2)

New (pdbstruct Vector3d):
  from pdbstruct.vector3d import Vector3d
  vec = Vector3d(1.0, 2.0, 3.0)
  normalized = vec.normalized()
  dist = (v1 - v2).length()
  d = v1.dot(v2)
  c = v1.cross(v2)

✓ Vector creation works
  v1 = ( 1.00, 2.00, 3.00 )
  v2 = ( 4.00, 5.00, 6.00 )

Arithmetic:
  v1 + v2 = ( 5.00, 7.00, 9.00 )
  v1 - v2 = ( -3.00, -3.00, -3.00 )
✗ Vector operations failed: unsupported operand type(s) for *: 'Vector3d' and 'int'

======================================================================
TEST 5: ADDITIONAL API DISCOVERY
======================================================================

Structure object methods:
  ['add_atom', 'add_residue', 'are_close_residues', 'assign_residue_properties', 'calc_atom_configuration', 'calc_max_length', 'find_atom_in_soup', 'find_first_residue', 'find_residue_indices', 'get_atom_count', 'get_atom_indices', 'get_atom_proxy', 'get_atoms_of_chain_containing_residue', 'get_center', 'get_extent_from_center', 'get_i_atom_at_position', 'get_i_atom_closest', 'get_neighbours', 'get_neighbours_of_point', 'get_residue_count', 'get_residue_proxy', 'get_vertices_and_radii', 'is_empty', 'is_res_close_to_point', 'push_structure_id', 'set_atom_bfactors']

Structure object properties:
  ['atom_proxy', 'atom_store', 'atom_types', 'chains', 'count_res_added', 'elems', 'i_structure', 'is_hetatm', 'max_length', 'parsing_error', 'res_ids', 'res_types', 'residue_normal', 'residue_proxy', 'residue_store', 'structure_id', 'structure_ids', 'title']

======================================================================
SUMMARY - API MAPPINGS
======================================================================

KEY DIFFERENCES FOUND:

1. Module Structure:
   pdbremix.pdbatoms → pdbstruct.parse (for loading)
   pdbremix.pdbatoms → pdbstruct.soup (for Soup class)
   pdbremix.v3 → pdbstruct.vector3d

2. Loading PDB:
   OLD: pdbatoms.Soup(filename)
   NEW: parse.load_soup(filename)

3. Vector Creation:
   OLD: v3.vector(x, y, z)  [functional]
   NEW: Vector3d(x, y, z)   [object-oriented]

4. Vector Operations:
   OLD: v3.norm(vec)        NEW: vec.normalized()
   OLD: v3.distance(v1, v2) NEW: (v1 - v2).length()
   OLD: v3.dot(v1, v2)      NEW: v1.dot(v2)
   OLD: v3.cross(v1, v2)    NEW: v1.cross(v2)

NEXT STEPS:
1. Document atom/residue access patterns
2. Test with actual pyball code snippets
3. Create compatibility shim layer if needed
4. Update todo.md with findings


✓ Exploration complete!

To add findings to beads:
  bd comment pyball-hdg.1 'Finding: <your discovery here>'
